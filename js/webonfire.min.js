function Webonfire(a){var b=this;(null==a||""==a)&&(a={appname:"app",version:"1.0.0",mode:"offline-first",cacheAllRequests:!0,debug:!0}),this.getAppname=function(){return a.appname},this.getVersion=function(){return a.version},this.app=function(){return a.appname+"__v"+a.version},this.install=function(c){self.addEventListener("install",function(d){a.debug&&console.log("installing",b.app()+"..."),"undefined"!=typeof c&&"object"==typeof c&&null!=c&&d.waitUntil(caches.open(b.app()).then(function(e){return e.addAll(c)},function(e){a.debug&&console.error("Failed to cache files: ",e)}))}),self.addEventListener("fetch",function(d){!0===a.cacheAllRequests&&d.waitUntil(caches.open(b.app()).then(function(e){return caches.match(d.request).then(function(f){return f||fetch(d.request).then(function(g){e.put(d.request,g.clone())})})})),("offline-first"===a.mode||""===a.mode)&&d.respondWith(caches.match(d.request).then(function(e){return e||fetch(d.request)}).catch(function(e){a.debug&&console.log("Failed to fetch installed files: ",e)})),"online-first"===a.mode&&d.respondWith(fetch(d.request).catch(function(){return caches.match(d.request)}))})}}function splitApp(a,b="appname"){return details=a.split("__"),"appname"==b?details[0]:"version"==b?details[1]:void 0}Webonfire.getVersion=function(a){return caches.keys().then(function(b){for(var c=b.length-1;0<=c;c--)if(a===splitApp(b[c],"appname"))return splitApp(b[c],"version")})},Webonfire.uninstall=function(a){caches.keys().then(function(b){for(var c=b.length-1;0<=c;c--){return b[c]}return"none"}).then(function(b){return"none"==b?void(conf.debug&&console.log("Application not found")):caches.delete(b)})};